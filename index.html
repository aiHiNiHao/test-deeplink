<!DOCTYPE html>
<html>
<body>
    <h2 id="status">正在返回 App...</h2>
    <a href="javascript:void(0)" id="manualBtn" style="padding: 20px; display: none; background: #007bff; color: white; text-align: center;">手动点击返回</a>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
    
        if (code) {
            // 构造自定义 Scheme 链接
            // 格式：bibeex-auth://callback?code=xxxx
            const appSchemeUrl = "bibeex-auth://callback?code=" + encodeURIComponent(code);
    
            console.log("正在通过自定义协议强力回跳...");
            
            // 由于浏览器不支持 bibeex-auth，它会立刻把这个 Intent 扔给 Android 系统
            // 系统会 100% 匹配到你的 App，不会有任何犹豫
            window.location.replace(appSchemeUrl);
    
            // 保底：如果自动跳没触发，显示一个按钮
            setTimeout(() => {
                const btn = document.createElement('button');
                btn.innerText = "手动返回 App";
                btn.onclick = () => { window.location.href = appSchemeUrl; };
                document.body.appendChild(btn);
            }, 500);
        }
    </script>
</body>
</html>
